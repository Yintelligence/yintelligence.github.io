<!DOCTYPE HTML>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Extends, Casting, Higher Order Functions, Chaoqun Yin">
    <meta name="description" content="Veni, Vidi, Vici">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Extends, Casting, Higher Order Functions | Chaoqun Yin</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.3.0"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Chaoqun Yin</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>Index</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>Tags</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>Categories</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>Archives</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>About</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>Contact</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>Friends</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Chaoqun Yin</div>
        <div class="logo-desc">
            
            Veni, Vidi, Vici
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			Index
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			Tags
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			Categories
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			Archives
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			About
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			Contact
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			Friends
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/18.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Extends, Casting, Higher Order Functions</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Data-Structures/">
                                <span class="chip bg-color">Data Structures</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Notes/" class="post-category">
                                Notes
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2021-03-11
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>Update Date:&nbsp;&nbsp;
                    2021-03-11
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>Word Count:&nbsp;&nbsp;
                    3.2k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>Read Times:&nbsp;&nbsp;
                    19 Min
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>Read Count:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="extends-casting-higher-order-functions">Extends, Casting, Higher Order Functions</h1>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/playlist?list=PL8FaHk7qbOD6Mi8gDriGGeSnHi68QLuVD">Video</a></p>
<h2 id="implementation-inheritance-extends"><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=990kImS-_nA&amp;list=PL8FaHk7qbOD6Mi8gDriGGeSnHi68QLuVD&amp;index=1">Implementation Inheritance: Extends</a></h2>
<h3 id="the-extends-keyword">The Extends Keyword</h3>
<p>When a class is a hyponym of an interface, we used <strong>implements.</strong></p>
<ul>
<li>Example: SLList&lt;Blorp&gt; <strong>implements</strong> List61B&lt;Blorp&gt;</li>
</ul>
<p>If you want one class to be a hyponym of another <em>class</em> (instead of an interface), you use <strong>extends.</strong></p>
<p>We’d like to build RotatingSLList that can perform any SLList operation as well as:</p>
<ul>
<li>rotateRight(): Moves back item the front.</li>
</ul>
<p>Example: Suppose we have [5, 9, 15, 22].</p>
<ul>
<li>After rotateRight: [22, 5, 9, 15]</li>
</ul>
<p><img src="/images/CS61B/1645230.png" /></p>
<h3 id="rotatingsllist">RotatingSLList</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RotatingSLList</span>&lt;<span class="title">Blorp</span>&gt; <span class="keyword">extends</span> <span class="title">SLList</span>&lt;<span class="title">Blorp</span>&gt;</span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rotateRight</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       Blorp oldBack = removeLast();</span><br><span class="line">       addFirst(oldBack);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Because of <strong>extends</strong>, RotatingSLList inherits all members of SLList:</p>
<ul>
<li>All instance and static variables.</li>
<li>All methods.</li>
<li>All nested classes.</li>
<li><strong>Note</strong>: but members may be private and thus inaccessible!</li>
</ul>
<p>Constructors are not inherited.</p>
<h3 id="extends-with-overriding"><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=RJ_OpzLeHeQ&amp;list=PL8FaHk7qbOD6Mi8gDriGGeSnHi68QLuVD&amp;index=2">Extends with Overriding</a></h3>
<h4 id="another-example-vengefulsllis">Another Example: VengefulSLLis</h4>
<p>Suppose we want to build an SLList that:</p>
<ul>
<li>Remembers all Items that have been destroyed by removeLast.</li>
<li>Has an additional method printLostItems(), which prints all deleted items.</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    	VengefulSLList&lt;Integer&gt; vs1 = <span class="keyword">new</span> VengefulSLList&lt;Integer&gt;();</span><br><span class="line">    	vs1.addLast(<span class="number">1</span>);</span><br><span class="line">    	vs1.addLast(<span class="number">5</span>);</span><br><span class="line">    	vs1.addLast(<span class="number">10</span>);</span><br><span class="line">    	vs1.addLast(<span class="number">13</span>);      <span class="comment">/* [1, 5, 10, 13] */</span></span><br><span class="line">    	vs1.removeLast();     <span class="comment">/* 13 gets deleted. */</span></span><br><span class="line">    	vs1.removeLast();     <span class="comment">/* 10 gets deleted. */</span></span><br><span class="line">    	System.out.print(<span class="string">&quot;The fallen are: &quot;</span>);</span><br><span class="line">    	vs1.printLostItems(); <span class="comment">/* Should print 10 and 13. */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VengefulSLList</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">extends</span> <span class="title">SLList</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> SLList&lt;Item&gt; deletedItems;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">VengefulSLList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       deletedItems = <span class="keyword">new</span> SLList&lt;Item&gt;();</span><br><span class="line">	&#125;</span><br><span class="line">  </span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Item <span class="title">removeLast</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    		Item oldBack = <span class="keyword">super</span>.removeLast();</span><br><span class="line">            <span class="comment">/* calls Superclass’s version of removeLast() */</span></span><br><span class="line">    		deletedItems.addLast(oldBack);</span><br><span class="line">    		<span class="keyword">return</span> oldBack;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printLostItems</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    		deletedItems.print();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>Note: Java syntax disallows super.super. For a nice description of why, see <a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/586363/why-is-super-super-method-not-allowed-in-java">this link</a>.</em></p>
<h3 id="constructor-behaviour-is-slightly-weird"><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=Cb8F2qreFR8&amp;list=PL8FaHk7qbOD6Mi8gDriGGeSnHi68QLuVD&amp;index=3">Constructor Behaviour Is Slightly Weird</a></h3>
<p>Constructors are not inherited. However, the rules of Java say that <strong>all constructors must start with a call to one of the super class’s constructors [<strong><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/tutorial/java/IandI/super.html"><strong>Link</strong></a></strong>].</strong></p>
<ul>
<li>Idea: If every VengefulSLList is-an SLList, every VengefulSLList must be set up like an SLList.
<ul>
<li>If you didn’t call SLList constructor, sentinel would be null. Very bad.</li>
</ul></li>
<li>You can explicitly call the constructor with the keyword super (no dot).</li>
<li>If you don’t explicitly call the constructor, Java will automatically do it for you.</li>
</ul>
<p>These constructors are exactly equivalent.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">VengefulSLList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   deletedItems = <span class="keyword">new</span> SLList&lt;Item&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">VengefulSLList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">super</span>(); <span class="comment">// must come first!</span></span><br><span class="line">   deletedItems = <span class="keyword">new</span> SLList&lt;Item&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="calling-other-constructors">Calling Other Constructors</h3>
<p>If you want to use a super constructor other than the no-argument constructor, can give parameters to super.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">VengefulSLList</span><span class="params">(Item x)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">super</span>(x); <span class="comment">// calls SLList(Item x)</span></span><br><span class="line">   deletedItems = <span class="keyword">new</span> SLList&lt;Item&gt;();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">VengefulSLList</span><span class="params">(Item x)</span> </span>&#123;</span><br><span class="line">   deletedItems = <span class="keyword">new</span> SLList&lt;Item&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Not equivalent!</strong> Code below makes implicit call to <strong>super()</strong>, <u>not super(x)</u>.</p>
<h3 id="the-object-class"><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=wrx_y3ib5iQ&amp;list=PL8FaHk7qbOD6Mi8gDriGGeSnHi68QLuVD&amp;index=4">The Object Class</a></h3>
<p>As it happens, every type in Java is a descendant of the Object class.</p>
<ul>
<li>VengefulSLList extends SLList.</li>
<li>SLList extends Object (implicitly)</li>
</ul>
<p><img src="/images/CS61B/1645231.png" /></p>
<h3 id="is-a-vs.-has-a">Is-A vs. Has-A</h3>
<p>Important Note: extends should only be used for <strong>is-a</strong> (hypernymic) relationships!</p>
<p>Common mistake is to use it for “<strong>has-a</strong>” relationships. (a.k.a. meronymic).</p>
<ul>
<li>Possible to subclass SLList to build a Set, but conceptually weird, e.g. get(i) doesn’t make sense, because sets are not ordered.</li>
</ul>
<p><img src="/images/CS61B/1645232.png" /></p>
<h2 id="encapsulation"><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=GioVGLuW69o&amp;list=PL8FaHk7qbOD6Mi8gDriGGeSnHi68QLuVD&amp;index=5">Encapsulation</a></h2>
<h3 id="complexity-the-enemy">Complexity: The Enemy</h3>
<p>When building large programs, our enemy is complexity.</p>
<p>Some tools for managing complexity:</p>
<ul>
<li>Hierarchical abstraction.
<ul>
<li>Create <strong>layers of abstraction</strong>, with clear abstraction barriers!</li>
</ul></li>
<li>“Design for change” (D. Parnas)
<ul>
<li>Organize program around objects.</li>
<li>Let objects decide how things are done.</li>
<li><strong>Hide information</strong> others don’t need.</li>
</ul></li>
</ul>
<h3 id="modules-and-encapsulation-shewchuk">Modules and Encapsulation [<a target="_blank" rel="noopener" href="https://people.eecs.berkeley.edu/~jrs/61b/lec/18">Shewchuk</a>]</h3>
<p><strong>Module</strong>: A set of methods that work together as a whole to perform some task or set of related tasks.</p>
<p>A module is said to be <strong>encapsulated</strong> if its implementation is <u>completely hidden</u>, and it can be accessed only through a documented interface.</p>
<ul>
<li>Instance variables private. Methods like resize private.</li>
<li>As we’ll see: Implementation inheritance (e.g. extends) breaks encapsulation!</li>
</ul>
<p><img src="/images/CS61B/1645233.png" /></p>
<h3 id="a-cautionary-tal">A Cautionary Tal</h3>
<figure>
<img src="/images/CS61B/1645234.png" alt="" /><figcaption>Interesting questions</figcaption>
</figure>
<h3 id="abstraction-barriers">Abstraction Barriers</h3>
<p>As the user of an ArrayDeque, you cannot observe its internals</p>
<ul>
<li>Even when writing tests, you don’t (usually) want to peer inside.</li>
</ul>
<p>Java is a great language for enforcing abstraction barriers with syntax.</p>
<p><img src="/images/CS61B/1645235.png" /></p>
<h3 id="implementation-inheritance-breaks-encapsulation"><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=EfxYiAN6YME&amp;list=PL8FaHk7qbOD6Mi8gDriGGeSnHi68QLuVD&amp;index=6">Implementation Inheritance Breaks Encapsulation</a></h3>
<p>Suppose we have a Dog class with the two methods shown.</p>
<p><img src="/images/CS61B/1645236.png" /></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bark</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   System.out.println(<span class="string">&quot;bark&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">barkMany</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">   	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i += <span class="number">1</span>) &#123;</span><br><span class="line">      	bark();  </span><br><span class="line">   	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>We could just as easily have implemented methods as shown below.</p>
<ul>
<li>From the outside, functionality is exactly the same, it’s just a question of aesthetics.</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bark</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   barkMany(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">barkMany</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">   	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i += <span class="number">1</span>) &#123;</span><br><span class="line">      	System.out.println(<span class="string">&quot;bark&quot;</span>);  </span><br><span class="line">   	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1. What would vd.barkMany(3) output?</p>
<figure>
<img src="/images/CS61B/1645237.png" alt="" /><figcaption>Assuming vd is a Verbose Dog</figcaption>
</figure>
<ul>
<li><strong>As a dog, I say: bark bark bark</strong></li>
<li><del>bark bark bark</del></li>
<li><del>Something else</del></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bark</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   System.out.println(<span class="string">&quot;bark&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">barkMany</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">   	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i += <span class="number">1</span>) &#123;</span><br><span class="line">      	bark();  </span><br><span class="line">   	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">barkMany</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;As a dog, I say: &quot;</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i += <span class="number">1</span>) &#123;</span><br><span class="line">       	bark(); <span class="comment">// calls inherited bark method</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2. What would vd.barkMany(3) output?</p>
<ul>
<li><del>As a dog, I say: bark bark bark</del></li>
<li><del>bark bark bark</del></li>
<li><strong>Something else</strong>
<ul>
<li>Gets caught in an infinite loop!</li>
</ul></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bark</span><span class="params">()</span> </span>&#123;</span><br><span class="line">barkMany(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">barkMany</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">   	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i += <span class="number">1</span>) &#123;</span><br><span class="line">      	System.out.println(<span class="string">&quot;bark&quot;</span>);  </span><br><span class="line">   	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">barkMany</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;As a dog, I say: &quot;</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i += <span class="number">1</span>) &#123;</span><br><span class="line">       	bark(); <span class="comment">// calls inherited bark method</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="type-checking-and-casting"><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=cMAchIFcRN0&amp;list=PL8FaHk7qbOD6Mi8gDriGGeSnHi68QLuVD&amp;index=7">Type Checking and Casting</a></h2>
<h3 id="dynamic-method-selection-and-type-checking-puzzle">Dynamic Method Selection and Type Checking Puzzle</h3>
<p>For each line of code, determine:</p>
<ul>
<li>Does that line cause a compilation error?</li>
<li>Which method does dynamic method selection use?</li>
</ul>
<figure>
<img src="/images/CS61B/1645238.png" alt="" /><figcaption>Reminder: VengefulSLList overrides removeLast and provides a new method called printLostItems.</figcaption>
</figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">   	VengefulSLList&lt;Integer&gt; vsl = </span><br><span class="line">          <span class="keyword">new</span> VengefulSLList&lt;Integer&gt;(<span class="number">9</span>);</span><br><span class="line">   	SLList&lt;Integer&gt; sl = vsl;   </span><br><span class="line"></span><br><span class="line">	sl.addLast(<span class="number">50</span>); <span class="comment">// VengefulSLList doesn’t override, uses SLList’s.</span></span><br><span class="line">   	sl.removeLast(); <span class="comment">// Uses VengefulSLList’s.		</span></span><br><span class="line">    </span><br><span class="line">    sl.printLostItems(); <span class="comment">// Compilation errorvg!</span></span><br><span class="line">    VengefulSLList&lt;Integer&gt; vsl2 = sl; <span class="comment">// Compilation error!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Reminder: Dynamic Method Selection</strong></p>
<p>If overridden, decide which method to call based on <strong>run-time</strong> (Also called dynamic type) type of variable.</p>
<ul>
<li>sl’s runtime type: VengefulSLList.</li>
</ul>
<p><strong>Compile-Time Type Checking</strong></p>
<p>Compiler allows method calls based on <strong>compile-time</strong> (Also called static type) type of variable.</p>
<ul>
<li>sl’s runtime type: VengefulSLList.</li>
<li>But cannot call printLostItems.</li>
</ul>
<p>Compiler also allows assignments based on compile-time types.</p>
<ul>
<li>Even though sl’s runtime-type is VengefulSLList, cannot assign to vsl2.</li>
<li>Compiler plays it as safe as possible with type checking.</li>
</ul>
<h3 id="compile-time-types-and-expressions">Compile-Time Types and Expressions</h3>
<p>Expressions have compile-time types</p>
<ul>
<li>An expression using the new keyword has the specified compile-time type.</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">SLList&lt;Integer&gt; sl = <span class="keyword">new</span> VengefulSLList&lt;Integer&gt;();  </span><br></pre></td></tr></table></figure>
<ul>
<li>Compile-time type of right hand side (RHS) expression is VengefulSLList.</li>
<li>A VengefulSLList is-an SLList, so assignment is allowed.</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">VengefulSLList&lt;Integer&gt; vsl = <span class="keyword">new</span> SLList&lt;Integer&gt;(); <span class="comment">// Compilation error!</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>Compile-time type of RHS expression is SLList.</p></li>
<li><p>An SLList is not necessarily a VengefulSLList, so compilation error results.</p></li>
<li><p>Method calls have compile-time type equal to their declared type.</p></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Dog <span class="title">maxDog</span><span class="params">(Dog d1, Dog d2)</span> </span>&#123; … &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Any call to maxDog will have compile-time type Dog!</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* Example */</span></span><br><span class="line">Poodle frank  = <span class="keyword">new</span> Poodle(<span class="string">&quot;Frank&quot;</span>, <span class="number">5</span>);</span><br><span class="line">Poodle frankJr = <span class="keyword">new</span> Poodle(<span class="string">&quot;Frank Jr.&quot;</span>, <span class="number">15</span>);</span><br><span class="line"></span><br><span class="line">Dog largerDog = maxDog(frank, frankJr);</span><br><span class="line">Poodle largerPoodle = maxDog(frank, frankJr); </span><br><span class="line"><span class="comment">/* Compilation error! RHS has compile-time type Dog. */</span></span><br></pre></td></tr></table></figure>
<h3 id="casting">Casting</h3>
<p>Java has a special syntax for specifying the compile-time type of any expression.</p>
<ul>
<li><p>Put desired type in parenthesis before the expression.</p></li>
<li><p>Examples:</p>
<ul>
<li><p>Compile-time type Dog:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">maxDog(frank, frankJr);</span><br></pre></td></tr></table></figure></li>
<li><p>Compile-time type Poodle:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">(Poodle) maxDog(frank, frankJr);</span><br></pre></td></tr></table></figure>
<p>Tells compiler to pretend it sees a particular type.</p></li>
</ul></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">oodle frank  = <span class="keyword">new</span> Poodle(<span class="string">&quot;Frank&quot;</span>, <span class="number">5</span>);</span><br><span class="line">Poodle frankJr = <span class="keyword">new</span> Poodle(<span class="string">&quot;Frank Jr.&quot;</span>, <span class="number">15</span>);</span><br><span class="line">Dog largerDog = maxDog(frank, frankJr);</span><br><span class="line">Poodle largerPoodle = (Poodle) maxDog(frank, frankJr);</span><br><span class="line"><span class="comment">/* Compilation OK! RHS has compile-time type Poodle. */</span></span><br></pre></td></tr></table></figure>
<p>Casting is a powerful but dangerous tool.</p>
<ul>
<li>Tells Java to treat an expression as having a different compile-time type.</li>
<li>In example below, effectively tells the compiler to ignore its type checking duties.</li>
<li>Does not actually change anything: sunglasses don’t make the world dark.</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Poodle frank  = <span class="keyword">new</span> Poodle(<span class="string">&quot;Frank&quot;</span>, <span class="number">5</span>);</span><br><span class="line">Malamute frankSr = <span class="keyword">new</span> Malamute(<span class="string">&quot;Frank Sr.&quot;</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">Poodle largerPoodle = (Poodle) maxDog(frank, frankSr);</span><br></pre></td></tr></table></figure>
<p>If we run the code above, we get a ClassCastException at runtime.</p>
<ul>
<li>So much for .class files being verifiably type checked...</li>
</ul>
<h2 id="dynamic-method-selection-and-casting-puzzle">Dynamic Method Selection and Casting Puzzle</h2>
<h3 id="is-it-overriding-overloading">Is it Overriding? Overloading?</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bird</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">gulgate</span><span class="params">(Bird b)</span> </span>&#123;</span><br><span class="line">    	System.out.println(<span class="string">&quot;BiGulBi&quot;</span>); &#125;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Falcon</span> <span class="keyword">extends</span> <span class="title">Bird</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">gulgate</span><span class="params">(Falcon f)</span> </span>&#123;</span><br><span class="line">    	System.out.println(<span class="string">&quot;FaGulFa&quot;</span>);&#125;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Bird bird = <span class="keyword">new</span> Falcon();</span><br><span class="line">Falcon falcon = (Falcon) bird;</span><br><span class="line">bird.gulgate(falcon);</span><br><span class="line">falcon.gulgate(falcon);</span><br></pre></td></tr></table></figure>
<p>What gets printed?</p>
<ul>
<li><del>BiGulBi BiGulBi</del></li>
<li><strong>BiGulBi FaGulFa</strong></li>
<li><del>FaGulFa BiGulBi</del></li>
<li><del>FaGulFa FaGulFa</del></li>
</ul>
<p><strong>Casting causes no change to the bird variable, nor to the object the bird variable points at!</strong></p>
<p>Remember: The compiler chooses the most specific matching method signature from the <u>static type of the invoking class</u>.</p>
<ul>
<li>Falcon is <u>overloading</u> the gulgate method, <u>not overriding</u>.</li>
<li>Compiler basically thinks “does Bird class have a gulgate method? Yes! I’ll use that”. Since there is no overriding, no dynamic method selection occurs.</li>
</ul>
<h2 id="higher-order-functions-in-java"><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=OcfTN1PZ7oA&amp;list=PL8FaHk7qbOD6Mi8gDriGGeSnHi68QLuVD&amp;index=8">Higher Order Functions in Java</a></h2>
<p><strong>Higher Order Function</strong>: A function that treats another function as data.</p>
<ul>
<li>e.g. takes a function as input.</li>
</ul>
<p>Example in Python:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tenX</span>(<span class="params">x</span>):</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">10</span>*x</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">do_twice</span>(<span class="params">f, x</span>):</span></span><br><span class="line">	<span class="keyword">return</span> f(f(x))</span><br><span class="line"> </span><br><span class="line">print(do_twice(tenX, <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">200</span></span><br></pre></td></tr></table></figure>
<h3 id="higher-order-functions-in-java-7">Higher Order Functions in Java 7</h3>
<p>Old School (Java 7 and earlier)</p>
<ul>
<li>Fundamental issue: Memory boxes (variables) cannot contain pointers to functions.</li>
</ul>
<p>Can use an interface instead. Let’s try it out.</p>
<p><img src="/images/CS61B/1645239.png" /></p>
<p>Java code below is equivalent to given python code.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IntUnaryFunction</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">apply</span><span class="params">(<span class="keyword">int</span> x)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TenX</span> <span class="keyword">implements</span> <span class="title">IntUnaryFunction</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">apply</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">   		<span class="keyword">return</span> <span class="number">10</span> * x;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HoFDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">do_twice</span><span class="params">(IntUnaryFunction f, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">   		<span class="keyword">return</span> f.apply(f.apply(x));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">   		System.out.println(do_twice(<span class="keyword">new</span> TenX(), <span class="number">2</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="higher-order-functions-in-java-8-or-later">Higher Order Functions in Java 8 or Later</h3>
<p>In Java 8, new types were introduced: now can can hold references to methods.</p>
<ul>
<li>Why? The old way is still widely used, e.g. Comparators (see next lecture).</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Java8HoFDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">tenX</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">       	<span class="keyword">return</span> <span class="number">10</span>*x;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">doTwice</span><span class="params">(Function&lt;Integer, Integer&gt; f, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">     	<span class="keyword">return</span> f.apply(f.apply(x));</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">int</span> result = doTwice(Java8HoFDemo::tenX, <span class="number">2</span>);</span><br><span class="line">     	System.out.println(result);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="implementation-inheritance-cheatsheet">Implementation Inheritance Cheatsheet</h3>
<p>VengefulSLList extends SLList means a VenglefulSLList is-an SLList. Inherits all members!</p>
<ul>
<li>Variables, methods, nested classes.</li>
<li>Not constructors.</li>
<li>Subclass constructor must invoke superclass constructor first.</li>
<li>Use super to invoke overridden superclass methods and constructors.</li>
</ul>
<p>Invocation of overridden methods follows two simple rules:</p>
<ul>
<li>Compiler plays it safe and only lets us do things allowed by <strong>static</strong> type.</li>
<li>For <u>overridden</u> methods the actual method invoked is based on <strong>dynamic</strong> type of invoking expression, e.g. Dog.maxDog(d1, d2).bark();</li>
<li>Can use casting to overrule compiler type checking.</li>
</ul>
<h2 id="extra-problem-just-for-fun">Extra Problem Just For Fun</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Showdog dogC = <span class="keyword">new</span> ShowDog(<span class="string">&quot;Franklin&quot;</span>, <span class="string">&quot;Malamute&quot;</span>, <span class="number">180</span>, <span class="number">6</span>);</span><br><span class="line">Showdog dogD = <span class="keyword">new</span> ShowDog(<span class="string">&quot;Gargamel&quot;</span>, <span class="string">&quot;Corgi&quot;</span>, <span class="number">44</span>, <span class="number">12</span>);</span><br><span class="line"></span><br><span class="line">Dog.maxDog(dogC, dogD);</span><br><span class="line"></span><br><span class="line">Dog md = Dog.maxDog(dogC, dogD);</span><br><span class="line">ShowDog msd = Dog.maxDog(dogC, dogD);</span><br><span class="line"></span><br><span class="line">Object o = <span class="keyword">new</span> Dog(<span class="string">&quot;Hammy&quot;</span>, <span class="string">&quot;Beagle&quot;</span>, <span class="number">15</span>);</span><br><span class="line">Dog d = <span class="keyword">new</span> Dog(<span class="string">&quot;Ammo&quot;</span>, <span class="string">&quot;Labrador&quot;</span>, <span class="number">54</span>);</span><br><span class="line">Object stuff[] = <span class="keyword">new</span> Object[<span class="number">5</span>];</span><br><span class="line">stuff[<span class="number">0</span>] = o;</span><br><span class="line">stuff[<span class="number">1</span>] = d;</span><br><span class="line">stuff[<span class="number">2</span>] = <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>
<p>1. What is the static type of Dog.maxDog(dogC, dog D)?</p>
<p>2. Which (if any), will compile:</p>
<p>3. How many memory boxes are there in the code below? What are the dynamic types of their contents?</p>
<h2 id="overview">Overview</h2>
<p><strong>The Interface and implements.</strong> Up to now we have been writing classes and interfaces, and you have may noticed places where we have had to write redundant code for different (but similar!) classes. This leads us to the idea of inheritance, the idea that a class/object does not need to redefine all its methods, and instead can use properties of a parent class. Lets first note some differences between inheritence of a parent class and interfaces (Note that a class can do both, even at the same time! Here is the syntax for implemeting an interface:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">SLList&lt;Blorp&gt; implements List61B&lt;Blorp&gt;</span><br></pre></td></tr></table></figure>
<p>Similarly, the way for a class to extend the qualities of another class the syntax is as follows:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Class_Name extends Class_Name</span><br></pre></td></tr></table></figure>
<p><strong>Usage of Inheritance.</strong> Say we wanted to make a special type of <code>SLList</code> called <code>RotatingSLList</code>. <code>RotatingSLList</code> should be able to do everyhthing that SLList can; however, it should also be able to rotate to the right. How can we do this? Well this is just an application of Inheritance! Doing the following will allow for RotatingSLList to have all the qualities of SLList as well as its own method <code>rotateRight</code>.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RotatingSLList</span>&lt;<span class="title">Blorp</span>&gt; <span class="keyword">extends</span> <span class="title">SLList</span>&lt;<span class="title">Blorp</span>&gt;</span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rotateRight</span><span class="params">()</span> </span>&#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>What is Inherited?</strong> We have a powerful tool in Inheritance now; however, we will define a few rules. For now, we will say that we can inherit:</p>
<ul>
<li>instance and static variables</li>
<li>all methods</li>
<li>all nested classes This changes a little bit with the introduction of private variables but don’t worry about that right now. The one item that is not inherited is a class’s constructor.</li>
</ul>
<p><strong>The Special Case of the Constructor?</strong> Even though constructor’s are not inherited, we still use them. We can call the constructor explicitly by using the keyword <code>super()</code>. At the start of every constructor, there is already an implicit call to its super class`s constructor. As a result</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">VengefulSLList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  deletedItems = <span class="keyword">new</span> SLList&lt;Item&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>is equivalent to</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">VengefulSLList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">super</span>();</span><br><span class="line">  deletedItems = <span class="keyword">new</span> SLList&lt;Item&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>However, constructor`s with arguments are not implicitly called. This means that.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">VengefulSLList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>(x);</span><br><span class="line">    deletedItems = <span class="keyword">new</span> SLList&lt;Item&gt;();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>is not equivalent to</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">VengefulSLList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    deletedItems = <span class="keyword">new</span> SLList&lt;Item&gt;();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>This is because only the empty argument <code>super()</code> is called.</p>
<p><strong>Is A.</strong> When a class inherits from another, we know that it must have all the qualities of it. This means that <code>VengefulSLList</code> is a <code>SLList</code> because it has all the qualities of an <code>SLList</code>- it just has a few additional ones too.</p>
<p>Every single class is a descendent on the Object class, meaning they are all Objects.</p>
<p><strong>Abstraction</strong> As you’ll learn later in this class, programs can get a tad confusing when they are really large. A way to make programs easier to handle is to use abstraction. Basically abstraction is hiding components of programs that people do not need to see. The user of the hidden methods should be able to use them without knowing how they work.</p>
<p>An intuitive way to realize the motivation of abstraction is to look at yourself. You are a human (unless some robot is looking at this in which case I am sorry for offending you) and humans can eat food and convert it to energy. You do not need to know how you convert food to energy you just know that it works. In this case think of your conversion of food to energy as a method and the input is food and the output is energy.</p>
<p><strong>Casting</strong> In Java, every object has a static type (defined at compile-time) and a dynamic type (defined at run-time). Our code may rely on the fact that some variable may be a more specific type than the static type. For example if we had the below definitions:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Poodle frank  = <span class="keyword">new</span> Poodle(<span class="string">&quot;Frank&quot;</span>, <span class="number">5</span>);</span><br><span class="line">Poodle frankJr = <span class="keyword">new</span> Poodle(<span class="string">&quot;Frank Jr.&quot;</span>, <span class="number">15</span>);</span><br></pre></td></tr></table></figure>
<p>This statement would be valid</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Dog largerDog = maxDog(frank, frankJr);</span><br></pre></td></tr></table></figure>
<p>But this one would not be</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Poodle largerPoodle = maxDog(frank, frankJr);</span><br></pre></td></tr></table></figure>
<p>The reason the former statement is valid is because the compilers knows for a fact that anything that is returned from a <code>maxDog</code> function call is a <code>Dog</code>. However, in the latter case, the compiler does not know for a fact that the return value of <code>maxDog</code> would result in a <code>Poodle</code> even though both <code>Dog</code> arguments are <code>Poodle</code>s.</p>
<p>Instead of being happy with just having a generic <code>Dog</code>, we can be a bit risky and use a technique called casting. Casting allows us to force the static type of a variable, basically tricking the compiler into letting us force the static type of am expression. To make <code>largerPoodle</code> into a static type <code>Poodle</code> we will use the following:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Poodle largerPoodle = (Poodle) maxDog(frank, frankJr);</span><br></pre></td></tr></table></figure>
<p>Note that we are not changing the actual dynamic type of maxDog- we are just telling the compiler what is coming out of maxDog will be a <code>Poodle</code>. This means that any reference to <code>largerPoodle</code> will have a static type of <code>Poodle</code> associated with it.</p>
<p>Casting, while powerful is also quite dangerous. You need to ensure that what you are casting to can and will actually happen. There are a few rules that can be used:</p>
<ul>
<li>You can always cast up (to a more generic version of a class) without fear of ruining anything because we know the more specific version is a version of the generic class. For example you can always cast a Poodle to a Dog because all Poodles are Dog’s.</li>
<li>You can also cast down (to a more specific version of a class) with caution as you need to make sure that, during runtime, nothing is passed in that violates your cast. For example, sometimes Dog’s are Poodle’s but not always.</li>
<li>Finally, you cannot ever cast to a class that is neither above or below the class being cast. For an example, you cannot cast a Dog to a Monkey because a Monkey is not in the direct lineage of a Dog - it is a child of Animal so a bit more distant. You can think of this as “side casting” and it will result in a compile time error since the compiler knows this cast cannot possibly work.</li>
</ul>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Chaoqun Yin</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://yintelligence.tech/2021/03/11/2021-03-11-Extends,-Casting,-Higher-Order-Functions/">https://yintelligence.tech/2021/03/11/2021-03-11-Extends,-Casting,-Higher-Order-Functions/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        Reprint policy:
                    </i>
                </span>
                <span class="reprint-info">
                    All articles in this blog are used except for special statements
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    reprint polocy. If reproduced, please indicate source
                    <a href="/about" target="_blank">Chaoqun Yin</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Data-Structures/">
                                    <span class="chip bg-color">Data Structures</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2021/03/11/2021-03-11-Health-Information-&-Decision-Support-Systems/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/15.jpg" class="responsive-img" alt="Health Information &amp; Decision Support Systems">
                        
                        <span class="card-title">Health Information &amp; Decision Support Systems</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-03-11
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Notes/" class="post-category">
                                    Notes
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Data-Analytics-in-Health-Care-and-Connected-Care/">
                        <span class="chip bg-color">Data Analytics in Health Care and Connected Care</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/03/11/2021-03-11-Circuits/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/22.jpg" class="responsive-img" alt="Circuits">
                        
                        <span class="card-title">Circuits</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-03-11
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Notes/" class="post-category">
                                    Notes
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Structure-and-Interpretation-of-Computer-Programs/">
                        <span class="chip bg-color">Structure and Interpretation of Computer Programs</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + 'From: Chaoqun Yin<br />'
            + 'Author: Chaoqun Yin<br />'
            + 'Link: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\(', '\)']]}
    });
</script>



    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021</span>
            
            <span id="year">2021</span>
            <a href="/about" target="_blank">Chaoqun Yin</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2021";
                    var startMonth = "1";
                    var startDate = "28";
                    var startHour = "2";
                    var startMinute = "1";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/yintelligence" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:Yintelligence@outlook.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
