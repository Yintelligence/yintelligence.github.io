<!DOCTYPE HTML>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Hashing, Chaoqun Yin">
    <meta name="description" content="Veni, Vidi, Vici">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Hashing | Chaoqun Yin</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.3.0"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Chaoqun Yin</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>Index</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>Tags</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>Categories</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>Archives</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>About</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>Contact</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>Friends</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Chaoqun Yin</div>
        <div class="logo-desc">
            
            Veni, Vidi, Vici
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			Index
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			Tags
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			Categories
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			Archives
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			About
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			Contact
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			Friends
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/12.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Hashing</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Data-Structures/">
                                <span class="chip bg-color">Data Structures</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Data-model/" class="post-category">
                                Data model
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2021-04-10
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>Update Date:&nbsp;&nbsp;
                    2021-04-10
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>Word Count:&nbsp;&nbsp;
                    3.5k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>Read Times:&nbsp;&nbsp;
                    21 Min
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>Read Count:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="hashing">Hashing</h1>
<p><a href="https://yintelligence.tech/2021/02/22/2021-02-22-Introduction-to-data-structure/">CS61B: Data structure</a></p>
<p>Lecture <a target="_blank" rel="noopener" href="https://www.youtube.com/playlist?list=PL8FaHk7qbOD67rFIKNVkDcucFwNjUq9-d">Video</a> + <a target="_blank" rel="noopener" href="https://docs.google.com/presentation/d/1TG0MooBux5DPr7NYUQiwA8W6iub4ZGKViSXFGwx_Kak/edit#slide=id.g409413421_0637">Slides</a></p>
<p>Textbook <a target="_blank" rel="noopener" href="https://joshhug.gitbooks.io/hug61b/content/chap12/chap121.html">1</a>, <a target="_blank" rel="noopener" href="https://joshhug.gitbooks.io/hug61b/content/chap12/chap122.html">2</a>, <a target="_blank" rel="noopener" href="https://joshhug.gitbooks.io/hug61b/content/chap12/chap124.html">3</a>, <a target="_blank" rel="noopener" href="https://joshhug.gitbooks.io/hug61b/content/chap12/chap124.html">4</a>, <a target="_blank" rel="noopener" href="https://joshhug.gitbooks.io/hug61b/content/chap12/chap125.html">5</a></p>
<h2 id="issues-with-what-weve-seen-so-far"><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=rSqSlu8sEkI&amp;list=PL8FaHk7qbOD67rFIKNVkDcucFwNjUq9-d&amp;index=1">Issues with what we've seen so far</a></h2>
<p>We’ve now seen several implementations of the Set (or Map) ADT.</p>
<p><img src="/images/CS61B/1733550.png" /></p>
<p>However, there are some limitations that these structures impose:</p>
<ol type="1">
<li><p>They require that items be <strong>comparable</strong>.</p>
<ul>
<li><p>How do you decide where a new item goes in a BST? You have to answer the question "are you smaller than or bigger than the root"?</p></li>
<li><p>Not true of all types.</p>
<blockquote>
<p>For some objects, this question may make no sense.</p>
</blockquote></li>
</ul></li>
<li><p>They give a complexity of Θ(log<em>N</em>). Is this good? Absolutely. But maybe we can do better.</p></li>
</ol>
<h3 id="dataindexedintegerset"><code>DataIndexedIntegerSet</code></h3>
<p>For now, we're only going to try to improve issue #2 above (improve complexity from (log<em>N</em>) to Θ(1). We're going to not worry about issue #1 (comparability).</p>
<p>One extreme approach: Create an array of booleans indexed by data!</p>
<ul>
<li>Initially all values are false.</li>
<li>When an item is added, set appropriate index to true.</li>
</ul>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">DataIndexedIntegerSet</span> diis<span class="token punctuation">;</span>
diis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataIndexedIntegerSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

diis<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
diis<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
diis<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
diis<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<figure>
<img src="/images/CS61B/17335500.png" alt="" /><figcaption>Set containing nothing</figcaption>
</figure>
<figure>
<img src="/images/CS61B/17335501.png" alt="" /><figcaption>Set containing 0, 5, 10, 11</figcaption>
</figure>
<p>The <code>add(int x)</code> method simply sets the <code>x</code> position in our ArrayList to true. This takes <strong>Θ(1)</strong> time.</p>
<p>The <code>contains(int x)</code> method simply returns whether the <code>x</code> position in our ArrayList is <code>true</code> or <code>false</code>. This also takes <strong>Θ(1)</strong> time!</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataIndexedIntegerSet</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> present<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">DataIndexedIntegerSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        present <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token number">2000000000</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        present<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> present<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>What are some potential <strong>issues</strong> with this approach?</p>
<ul>
<li><p>Extremely wasteful of memory. To support checking presence of all positive integers, we need &gt; 2 billion booleans.</p>
<blockquote>
<p>If we assume that a <code>boolean</code> takes 1 byte to store, the above needs <code>2GB</code> of space per <code>new DataIndexedIntegerSet()</code>. Moreover, the user may only insert a handful of items...</p>
</blockquote></li>
<li><p>Need some way to generalize beyond integers.</p>
<blockquote>
<p>What do we do if someone wants to insert a <code>String</code></p>
</blockquote></li>
</ul>
<h3 id="dataindexedenglishwordset"><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=FYvABY2WYPo&amp;list=PL8FaHk7qbOD67rFIKNVkDcucFwNjUq9-d&amp;index=2"><code>DataIndexedEnglishWordSet</code></a></h3>
<p>Ideally, we want a data indexed set that can store arbitrary types. But previous idea only supports integers! Let’s talk about storing Strings. We'll call our data structure that can insert strings <code>DataIntexedEnglishWordSet</code></p>
<p>Now we want to insert the <code>String</code> <code>"cat"</code> into it.</p>
<p>Here's a crazy idea: let's <u>give every string a number</u>. Maybe "cat" can be <code>1</code>, "dog" can be <code>2</code> and "turtle" can be <code>3</code>.</p>
<blockquote>
<p>The way this would work is –– if someone wanted to add a "cat" to our data structure, we would 'figure out' that the number for "cat" is 1, and then set <code>present[1]</code> to be <code>true</code>.</p>
<p>If someone wanted to ask us if "cat" is in our data structure, we would 'figure out' that "cat" is 1, and check if <code>present[1]</code> is true.</p>
</blockquote>
<p><strong>But</strong> then if someone tries to insert the word "potatocactus", we'll not know what to do. We need to develop a general strategy so that given a string, we can figure out a number representation for it.</p>
<h4 id="strategy-1-use-the-first-letter.">Strategy 1: Use the first letter.</h4>
<p>A simple idea is to just use the first character of any given string to convert it to its number representation.</p>
<p>The key question:</p>
<ul>
<li>What is the <code>cat</code>th element of a list?</li>
<li>Use the first letter of the word as an index.</li>
</ul>
<p>So "cat" -&gt; "c" -&gt; 3. "Dog" -&gt; "d" -&gt; 4. But also, "drum" -&gt; "d" -&gt; 4.</p>
<p>What’s wrong with this approach?</p>
<ul>
<li><p>What if someone wanted to insert "dog" and "drum" into our <code>DataIntexedEnglishWordSet</code>? All bets are off, and we don't know how to do it.</p>
<blockquote>
<p>Note that when two different inputs ("dog" and "drum") map to the same integer, we call that a <strong>collision</strong>.</p>
</blockquote></li>
<li><p>Can’t store “=98yae98fwyawef”</p></li>
</ul>
<h4 id="strategy-2-avoiding-collisions">Strategy 2: Avoiding collisions</h4>
<p>To motivate this part, let's understand how our number system works.</p>
<p>A four digit number, say 5149, can be written as</p>
<p>5⋅10<sup>3</sup>+1⋅10<sup>2</sup>+4⋅10<sup>1</sup>+9⋅10<sup>0</sup></p>
<p>Actually, <strong>any</strong> 4 digit number can be written <strong>uniquely</strong> in this form. What that means is given 4 digits, a, b, c, d we can write a⋅10<sup>3</sup>+b⋅10<sup>2</sup>+c⋅10<sup>1</sup>+d⋅10<sup>0</sup> and that gives us a unique 4 digit number: abcd.</p>
<p>Notice that the 10<sup>10</sup> is important here. If we chose a bad number, say 2, the same is not true. Let's make sure we see what happens if we chose 2 as the multiplier.</p>
<ul>
<li>a, b, c, d = 1, 1, 1, 1 gives 1⋅2<sup>3</sup>+1⋅2<sup>2</sup>+1⋅2<sup>1</sup>+1⋅2<sup>0</sup>=15.</li>
<li>a, b, c, d = 0, 3, 1, 1 gives 0⋅2<sup>3</sup>+3⋅2<sup>2</sup>+1⋅2<sup>1</sup>+1⋅2<sup>0</sup>=15.</li>
</ul>
<p>A collision on inputs (1, 1, 1, 1) and (0, 3, 1, 1)!</p>
<p>So why is 10<sup>10</sup>important? It's because there are 10 unique digits in our decimal system: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9</p>
<p>Similarly, there are 2626 unique characters in the english lowercase alphabet.</p>
<p>Why not give each one a number: a=1, b=2, …, z=26. Now, we can write any unique lowercase string in <strong>base 26</strong>.</p>
<blockquote>
<p>Note that <strong>base 26</strong> simply means that we will use <strong>26</strong> as the multiplier, much like we used <strong>10</strong> and <strong>2</strong> as examples above.</p>
</blockquote>
<ul>
<li>"cat"<sub>26</sub> = "c" 26<sup>2</sup> <em>+ 'a'</em> 26<sup>1</sup> + 't' 26<sup>0</sup> = 3<sub>2</sub>6<sup>2</sup> + 1<sub>2</sub>6<sup>1</sup> + 20<sub>2</sub>26<sup>0</sup> =2074<sub>10</sub>.</li>
</ul>
<p><strong>Quick check</strong></p>
<ul>
<li>How do you represent "dog"?</li>
</ul>
<p>This representation <u>gives a unique integer to every english wor<u>d containing <strong>lowercase letters</strong></u>, much like using base 10 gives a unique representation to every number. We are guaranteed to <strong>not</strong> have collisions.</p>
<p><strong>Data Structure <code>DataIndexedEnglishWordSet</code></strong></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** Converts ith character of String to a letter number.
    * e.g. 'a' -> 1, 'b' -> 2, 'z' -> 26 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">letterNum</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">int</span> ithChar <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>ithChar <span class="token operator">&lt;</span> <span class="token string">'a'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>ithChar <span class="token operator">></span> <span class="token string">'z'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>
	<span class="token keyword">return</span> ithChar <span class="token operator">-</span> <span class="token string">'a'</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">englishToInt</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">int</span> intRep <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       	
        intRep <span class="token operator">=</span> intRep <span class="token operator">*</span> <span class="token number">27</span><span class="token punctuation">;</span>
        intRep <span class="token operator">=</span> intRep <span class="token operator">+</span> <span class="token function">letterNum</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">return</span> intRep<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong><code>DataIndexedEnglishWordSet</code> Implementation</strong></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataIndexedEnglishWordSet</span> <span class="token punctuation">&#123;</span>
   <span class="token keyword">private</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> present<span class="token punctuation">;</span>
 
   <span class="token keyword">public</span> <span class="token class-name">DataIndexedEnglishWordSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
       present <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token number">2000000000</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token punctuation">&#125;</span>
 
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
       present<span class="token punctuation">[</span><span class="token function">englishToInt</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
   <span class="token punctuation">&#125;</span>
 
   <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	   <span class="token keyword">return</span> present<span class="token punctuation">[</span><span class="token function">englishToInt</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="dataindexedstringset"><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=kLxyiFWZBDs&amp;list=PL8FaHk7qbOD67rFIKNVkDcucFwNjUq9-d&amp;index=3"><code>DataIndexedStringSet</code></a></h3>
<p>What if we want to store strings like “2pac” or “eGg!”? To understand what value we need to use for our base, let’s discuss briefly discuss the ASCII standard.</p>
<h4 id="ascii-characters">ASCII Characters</h4>
<p>There is a character format called <strong>ASCII</strong>, which has an integer per character.</p>
<ul>
<li><p>Each possible character is assigned a value between 0 and 127.</p></li>
<li><p>Characters 33 - 126 are “printable”, and are shown below.</p>
<p><img src="/images/CS61B/1733502.png" /></p></li>
<li><p>For example, <strong>char</strong> c = ’D’ is equivalent to <strong>char</strong> c = 68.</p></li>
</ul>
<p>Here, we see that the largest value (i.e., the base/multiplier we need to use) is 126. Let's just do that. The same thing as <code>DataIndexedEnglishWordSet</code>, but just with base <code>126</code>.</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">asciiToInt</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">int</span> intRep <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           
        intRep <span class="token operator">=</span> intRep <span class="token operator">*</span> <span class="token number">126</span><span class="token punctuation">;</span>
        intRep <span class="token operator">=</span> intRep <span class="token operator">+</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> intRep<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>What about adding support for Chinese? The largest possible representation is 40959, so we need to use that as the base. Here's an example:</p>
<ul>
<li><strong>char</strong> c = ’<strong>鳌</strong>’ is equivalent to <strong>char</strong> c = 40140.</li>
</ul>
<p>This encoding is known as Unicode. Table is too big to list.</p>
<h3 id="integer-overflow-and-hash-codes"><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ix2frc8dHbw&amp;list=PL8FaHk7qbOD67rFIKNVkDcucFwNjUq9-d&amp;index=4">Integer Overflow and Hash Codes</a></h3>
<h4 id="major-problem-integer-overflow">Major Problem: Integer Overflow</h4>
<p>The largest possible value for integers in Java is 2,147,483,647. The smallest value is -2,147,483,64<strong>8</strong>. If you try to take the largest value and add 1, you get the smallest value!</p>
<blockquote>
<p>In other words, the next number after 2,147,483,647 is -2,147,483,648.</p>
</blockquote>
<p>So, we will run into problems, even with just ASCII characters.</p>
<p>Because Java has a maximum integer, we won’t get the numbers we expect!</p>
<p>With base 126, we will run into overflow even for short strings.</p>
<p>Example: omens<sub>126</sub>= 28,196,917,171</p>
<blockquote>
<p>which is much greater than the maximum integer!</p>
</blockquote>
<p><code>asciiToInt</code>(’omens’) will give us -1,867,853,901 instead.</p>
<p>Overflow can result in <strong>collisions</strong>, causing incorrect answers.</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">moo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token class-name">DataIndexedStringSet</span> disi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataIndexedStringSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  disi<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"melt banana"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  disi<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"subterrestrial anticosmetic"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//asciiToInt for these strings is 839099497 </span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>melt banana</code> and <code>subterresetrial anticosmetic</code> actually have the same representation according to <code>asciiToInt</code> because of overflow. So if we added <code>melt banana</code> and then tried to ask <code>contains(subterrestrial anticosmetic)</code>, we would get <code>true</code>.</p>
<p><strong>The inevitable truth</strong>:</p>
<p>From the smallest to the largest possible integers, there are a total of 4,294,967,296 integers in Java. Yet, there are more than that many total objects that could be created in Java, and so collision is inevitable. Resistance is futile. We <strong>must</strong> figure out how to deal with collision head-on, instead of trying to work around it.</p>
<blockquote>
<p>If you don't believe that there are more than 4 billions objects one could create in Java, just consider: "one", "two", ..., "five trillion" –– each of which is a unique string.</p>
</blockquote>
<p>Note that our problem is not inherently the fact that overflow <em>exists</em>. All we wanted was for a way to convert a <code>String</code> to a number. Even if overflow <em>exists</em>, we do manage to convert a <code>String</code> to a number. <u>The inherent problem is caused by the fact that <strong><em>overflow causes collisions</em></strong></u>, which we don't know how to deal with.</p>
<p>Overflow <em>is</em> often bad in other contexts, for instance, it has some unexpected results if you don't know that overflow happens.</p>
<p>But here, overflow's existence doesn't ruin the fact that we wanted to convert a <code>String</code> to an <code>int</code>. So, we have that going for us.</p>
<h4 id="hash-codes">Hash Codes</h4>
<p>In computer science, taking an object and converting it into some integer is called "computing the <strong>hash code</strong> of the object". For instance, the hashcode of "melt banana" is 839099497.</p>
<p>We looked at how to compute this hashcode for Strings. For other Objects, there are one of two things we do:</p>
<ul>
<li>Every Object in Java has a default <code>.hashcode()</code> method, which we can use. Java computes this by figuring out where the <code>Object</code> sits in memory (every section of the memory in your computer has an address!), and uses that memory's address to do something similar to what we did with <code>String</code>s. This methods gives a <em>unique</em> hashcode for every single Java object.</li>
<li>Sometimes, we write our own <code>hashcode</code> method. For example, given a <code>Dog</code>, we may use a combination of its <code>name</code>, <code>age</code> and <code>breed</code> to generate a <code>hashcode</code>.</li>
</ul>
<h5 id="properties-of-hashcodes">Properties of HashCodes</h5>
<p>Hash codes have three necessary properties, which means a hash code must have these properties in order to be <strong>valid</strong>:</p>
<ol type="1">
<li>It must be an Integer</li>
<li>If we run <code>.hashCode()</code> on an object twice, it should return the <strong>same</strong> number</li>
<li>Two objects that are considered <code>.equal()</code> must have the same hash code.</li>
</ol>
<p>Not all hash codes are created equal, however. If you want your hash code to be considered a <strong>good</strong> hash code, it should:</p>
<ol type="1">
<li>Distribute items evenly</li>
</ol>
<p><strong>Note that at this point, we know how to add arbitrary objects to our data structure, not only strings.</strong></p>
<h5 id="pending-issues">Pending issues</h5>
<ul>
<li>Space: we still haven't figured out how to use less space.</li>
<li>Handling Collisions: we have determined that we need to handle collisions, but we haven't actually handled them yet.</li>
</ul>
<p>Everything else has been solved!</p>
<h2 id="two-fundamental-challenges">Two Fundamental Challenges</h2>
<ol type="1">
<li>How do we resolve hashCode collisions (“melt banana” vs. “subterrestrial anticosmetic”)?
<ul>
<li>We’ll call this <strong>collision handling</strong>.</li>
</ul></li>
<li>How do we compute a hash code for arbitrary objects?
<ul>
<li>We’ll call this <strong>computing a hashCode</strong>.</li>
<li>Example: Our hashCode for “melt banana” was 839099497.</li>
<li>For Strings, this was relatively straightforward (treat as a base 27 or base 126 or base 40959 number).</li>
</ul></li>
</ol>
<h3 id="handling-collisions"><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=5caI6XD_YLA&amp;list=PL8FaHk7qbOD67rFIKNVkDcucFwNjUq9-d&amp;index=5">Handling Collisions</a></h3>
<p>Pigeonhole principle tells us that collisions are inevitable due to integer overflow.</p>
<ul>
<li>Example: hash code for “moo” and “Ñep” might both be 718.</li>
</ul>
<p>Suppose N items have the same numerical representation h:</p>
<ul>
<li>Instead of storing true in position h, store a “bucket” of these N items at position h.</li>
</ul>
<p><img src="/images/CS61B/17335503.png" /></p>
<p><strong>How to implement a “bucket”?</strong></p>
<ul>
<li>Conceptually simplest way: LinkedList.</li>
<li>Could also use ArrayLists.</li>
<li>Could also use an ArraySet.</li>
<li>Will see it doesn’t really matter what you do.</li>
</ul>
<p>For example, if we get a new item, and its hashcode is <code>$h$</code>:</p>
<ul>
<li><p>If there is nothing at index <span class="math inline">\(h\)</span> at the moment, we'll create a new <code>LinkedList</code> for index <span class="math inline">\(h\)</span>, place it there, and then add the new item to the newly created <code>LinkedList</code>.</p></li>
<li><p>If there is already something at index <code>$h$</code>, then there is already a <code>LinkedList</code> there. We simply add our new item to that <code>LinkedList</code>.</p>
<blockquote>
<p>Note: Our data structure is not allowed to have any duplicate items / keys. Therefore, we must first check whether the item we are trying to insert is already in this LinkedList. If it is, we do nothing! This also means that we will insert to the END of the linked list, since we need to check all of the elements anyways.</p>
</blockquote></li>
</ul>
<p>Each bucket in our array is initially empty. When an item x gets added at index h:</p>
<ul>
<li>If bucket h is empty, we create a new list containing x and store it at index h.</li>
<li>If bucket h is already a list, we add x to this list if it is not already present.</li>
</ul>
<p>We might call this a “<strong>separate chaining data indexed array</strong>”.</p>
<ul>
<li>Bucket #h is a “separate chain” of all items that have hash code h.</li>
</ul>
<p><img src="/images/CS61B/17335504.png" /></p>
<p>Look at all items in bucket 111239443 to see if “adevilish” is present.</p>
<p><strong>Observation</strong>: Worst case runtime will be proportional to length of longest list</p>
<p><img src="/images/CS61B/17335504.png" /></p>
<p>If we use the 10 buckets, where should our five items go?</p>
<ul>
<li>Put in bucket = hashCode % 10</li>
</ul>
<p><img src="/images/CS61B/17335505.png" /></p>
<p>What we’ve just created here is called a <strong>hash table</strong>.</p>
<ul>
<li><em>Data</em> is converted by a <strong>hash function</strong> into an integer representation called a <strong>hash code</strong>.</li>
<li>The <strong>hash code</strong> is then <strong>reduced</strong> to a valid <em>index</em>, usually using the modulus operator, e.g. 2348762878 % 10 = 8.</li>
</ul>
<p><img src="/images/CS61B/17335506.png" /></p>
<h4 id="concrete-workflow">Concrete workflow</h4>
<ul>
<li><code>add</code> item
<ul>
<li>Get hashcode (i.e., index) of item.</li>
<li>If index has no item, create new List, and place item there.</li>
<li>If index has a List already, check the List to see if item is already in there. If <em>not</em>, add item to List.</li>
</ul></li>
<li><code>contains</code> item
<ul>
<li>Get hashcode (i.e., index) of item.</li>
<li>If index is empty, return <code>false</code>.</li>
<li>Otherwise, check all items in the List at that index, and if the item exists, return <code>true</code>.</li>
</ul></li>
</ul>
<h4 id="runtime-complexity">Runtime Complexity</h4>
<p><strong>Why is contains</strong> Θ(<em>Q</em>)? Because we need to look at all the items in the LinkedList at the hashcode (i.e., index).</p>
<p><strong>Why is add</strong> Θ(<em>Q</em>)? Can't we just add to the beginning of the LinkedList, which takes Θ(1) time? No! Because <strong>we have to check to make sure the item isn't already in the linked list.</strong></p>
<h4 id="solving-space">Solving space</h4>
<p>Why keep an ArrayList of size 4 billion around? Recall that we did that to avoid collisions, because we wanted to be able to add every integer / word / <code>String</code> to our data structure. But now that we allow for collisions <em>anyway</em>, we can relax this a bit.</p>
<p>An idea: modulo. Let's just create an ArrayList of size, say, 100. Let's not change how the <code>hashcode</code> functions behaves (let it return a crazy large integer.) But after we get the <code>hashcode</code>, we'll take its modulo 100 to get an index within the 0…99 range that we want. And if collisions happen? Doesn't matter, we know how to deal with it!</p>
<p>Do note that our LinkedLists within the array will now be longer, because we're taking all the items spread across the 4 billions indices and compressing them into a 100 indices.</p>
<h2 id="hashtable"><code>HashTable</code></h2>
<p>What we've created now is called a <code>HashTable</code>.</p>
<ul>
<li>Inputs are converted by a hash function (<code>hashcode</code>) into an integer. Then, they're converted to a valid index using the modulus operator. Then, they're added at that index (dealing with collisions using LinkedLists).</li>
<li><code>contains</code> works in a similar fashion by figuring out the valid index, and looking in the corresponding LinkedList for the item.</li>
</ul>
<h3 id="hash-table-performance"><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=KHHi_LVjDLs&amp;list=PL8FaHk7qbOD67rFIKNVkDcucFwNjUq9-d&amp;index=6">Hash Table Performance</a></h3>
<h2 id="dealing-with-runtime">Dealing with Runtime</h2>
<p>The only issue left to solve is the issue of runtime.</p>
<p><img src="/images/CS61B/17335507.png" /></p>
<blockquote>
<p>The good news: We use way less memory and can now handle arbitrary data.The bad news: Worst case runtime is now Θ(Q), where Q is the length of the longest list.</p>
</blockquote>
<p>If we have 100 items, and our ArrayList is of size 5, then</p>
<ul>
<li><p>In the best case, all items get sent to the different indices evenly, the length of the longest list will be N/5. That is, we have 5 linkedLists, and each one contains 20 of the items.</p>
<blockquote>
<p>All items evenly distributed.</p>
</blockquote></li>
<li><p>In the worst case, all items get sent to the same index! That is, we have just 1 LinkedList, and it has all 100 items.</p>
<blockquote>
<p>All items in same list.</p>
</blockquote></li>
</ul>
<p>Suppose we have:</p>
<ul>
<li>A fixed number of buckets M.</li>
<li>An increasing number of items N.</li>
</ul>
<p>Major problem: Even if items are spread out evenly, lists are of length Q = N/M.</p>
<ul>
<li>For M = 5, that means Q = Θ(N). Results in linear time operations.</li>
<li>Hard question: How can we improve our design to guarantee that N/M is Θ(1)?</li>
</ul>
<p>There are two ways to try to fix this:</p>
<ol type="1">
<li>Dynamically growing our hashtable.</li>
<li>Improving our Hashcodes</li>
</ol>
<h3 id="dynamically-growing-the-hash-table">Dynamically growing the hash table</h3>
<p>Suppose we have M buckets (indices) and N items. We say that our <strong>load factor</strong> is N/M.</p>
<blockquote>
<p>Note that the <strong>load factor</strong> is equivalent to our <strong>best</strong> case runtime from above.</p>
</blockquote>
<p>So... we have incentive to keep our load factor low (after all, it is the best runtime we could possible achieve!).</p>
<p>And note that if we keep M (the number of buckets) fixed, and N keeps increasing, the load factor consistently keeps increasing.</p>
<p>Strategy? Every so often, just double M. The way we do this is as follows:</p>
<ul>
<li>Create a new HashTable with 2M buckets.</li>
<li>Iterate through all the items in the old HashTable, and one by one, add them into this new HashTable.
<ul>
<li>We need to add elements one by one again because since the size of the array changes, the modulus also changes, therefore the item probably belongs in a different bucket in the new hashtable than in the old one.</li>
</ul></li>
</ul>
<p>We do this by setting a <strong>load factor threshold</strong>. As soon as the load factor becomes bigger than this threshold, we resize.</p>
<p>Take a look at the example below. The hashcode for the "helmet" is 13. In the first hashtable, it gets sent to bucket 13%4=1. In the second hash table, it gets sent to bucket 13%8=5. <strong>Note that resizing the hash table also helps with shuffling the items in the hashtable</strong>!</p>
<p>At this point, <em>assuming items are evenly distributed</em>, all the lists will be approximately N/M items long, resulting in Θ(<em>N</em>/<em>M</em>) runtime. Remember that N/M is only allowed to be under a constant <strong>load factor threshold</strong>, and so, Θ(<em>N</em>/<em>M</em>)=Θ(1).</p>
<p>Note also that resizing takes Θ(<em>N</em>) time. Why? Because we need to add N<em>N</em> items to the hashtable, and each add takes Θ(1) time.</p>
<p>A small point: when doing the resize, we don't actually need to check if the items are already present in the LinkedList or not (because we know there are no duplicates), so we can just add each item in Θ(1) time for sure by adding it to the front of the linked list. (Recall that usually we have to search the LinkedList to make sure the item isn't there... but we can skip that step when resizing.)</p>
<p>Of course, we need to revisit our assumption of assuming items are evenly distributed. If items are not evenly distributed, our runtime will be Θ(<em>N</em>) because there could be a single linked list of size N.</p>
<h3 id="assuming-that-items-are-evenly-distributed">Assuming that items are evenly distributed?</h3>
<p>Items will distribute evenly if we have good hash codes (i.e. hashcodes which give fairly random values for different items.) Doing this in general is.. well... hard.</p>
<p>Some general good rules of thumb:</p>
<ul>
<li>Use a 'base' strategy similar to the one we developed earlier.</li>
<li>Use a 'base' that's a small prime.
<ul>
<li>Base 126 isn't actually very good, because using base 126 means that any string that ends in the same last 32 characters has the same hashcode.</li>
<li>This happens because of overflow.</li>
<li>Using prime numbers helps avoid overflow issues (i.e., collisions due to overflow).</li>
<li>Why a small prime? Because it's easier to compute.</li>
</ul></li>
</ul>
<p>Some examples</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Chaoqun Yin</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://yintelligence.tech/2021/04/10/2021-04-10-Hashing/">https://yintelligence.tech/2021/04/10/2021-04-10-Hashing/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        Reprint policy:
                    </i>
                </span>
                <span class="reprint-info">
                    All articles in this blog are used except for special statements
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    reprint polocy. If reproduced, please indicate source
                    <a href="/about" target="_blank">Chaoqun Yin</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Data-Structures/">
                                    <span class="chip bg-color">Data Structures</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2021/04/10/2021-04-09-Trees-Indexes-I/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/18.jpg" class="responsive-img" alt="Trees Indexes I">
                        
                        <span class="card-title">Trees Indexes I</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Chapter 11.1-11.4
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-04-10
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Database/" class="post-category">
                                    Database
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Database-systems/">
                        <span class="chip bg-color">Database systems</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/04/09/2021-04-09-Range-Searching-and-Multi-Dimensional-Data/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/17.jpg" class="responsive-img" alt="Range Searching and Multi-Dimensional Data">
                        
                        <span class="card-title">Range Searching and Multi-Dimensional Data</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Balanced Trees
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-04-09
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Data-model/" class="post-category">
                                    Data model
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Data-Structures/">
                        <span class="chip bg-color">Data Structures</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + 'From: Chaoqun Yin<br />'
            + 'Author: Chaoqun Yin<br />'
            + 'Link: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021</span>
            
            <span id="year">2021</span>
            <a href="/about" target="_blank">Chaoqun Yin</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2021";
                    var startMonth = "1";
                    var startDate = "28";
                    var startHour = "2";
                    var startMinute = "1";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/yintelligence" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:Yintelligence@outlook.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
