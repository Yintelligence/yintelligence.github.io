<!DOCTYPE HTML>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Support Vector Machines 支持向量机, Chaoqun Yin">
    <meta name="description" content="Veni, Vidi, Vici">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Support Vector Machines 支持向量机 | Chaoqun Yin</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.3.0"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Chaoqun Yin</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>Index</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>Tags</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>Categories</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>Archives</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>About</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>Contact</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>Friends</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Chaoqun Yin</div>
        <div class="logo-desc">
            
            Veni, Vidi, Vici
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			Index
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			Tags
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			Categories
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			Archives
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			About
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			Contact
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			Friends
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/14.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Support Vector Machines 支持向量机</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Machine-Learning/">
                                <span class="chip bg-color">Machine Learning</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Artificial-Intelligence/" class="post-category">
                                Artificial Intelligence
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2021-04-11
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>Update Date:&nbsp;&nbsp;
                    2021-04-25
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>Word Count:&nbsp;&nbsp;
                    3.7k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>Read Times:&nbsp;&nbsp;
                    14 Min
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>Read Count:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="support-vector-machines-支持向量机">Support Vector Machines 支持向量机</h1>
<p><a href="https://yintelligence.tech/2021/02/13/2021-02-13-Course-modules/">Machine learning @ Coursera by Andrew Ng</a></p>
<h2 id="优化目标-optimization-objective"><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV164411b7dx?p=70">12.1 优化目标 Optimization Objective</a></h2>
<p>支持向量机（Support Vector Machine）是一个更加强大的算法，广泛应用于工业界和学术界。与逻辑回归和神经网络相比， SVM在学习复杂的非线性方程时提供了一种更为清晰，更加强大的方式。</p>
<p>我们通过回顾逻辑回归，一步步将其修改为SVM。</p>
<p>首先回顾一下逻辑回归：</p>
<p><img src="https://github.com/fengdu78/Coursera-ML-AndrewNg-Notes/raw/master/images/3d12b07f13a976e916d0c707fd03153c.png" /></p>
<p>其 cost function 公式如下（这里稍微有点变化，将负号移到了括号内）：</p>
<p><img src="/images/AI/542362-20190103114536313-2003137599.png" /></p>
<p>在逻辑回归中我们已经熟悉了这里的假设函数形式，和右边的S型激励函数。这里用z表示θ<sup>T</sup>x。如果有一个 y=1的样本，我们希望h<sub>θ</sub>x趋近1，这就意味着当h<sub>θ</sub>（x）趋近于1时，θ<sup>T</sup>x应当远大于0。</p>
<p>如果你进一步观察逻辑回归的代价函数，你会发现每个样本 （x,y）都会为总代价函数，增加这里的一项，因此，对于总代价函数通常会有对所有的训练样本求和，并且这里还有一个表示一个训练样本所对应的表达式1/m项</p>
<p>先忽略 1/m 这一项，只考虑一个训练数据 x ，把 h<sub>θ</sub>（x） 带入公式，得到下面的式子：</p>
<p><img src="/images/AI/542362-20190103114902344-1881608204.png" /></p>
<p>下一步， 使用 z 标示其中的θ<sup>T</sup>x， 则之前的目标变为：</p>
<ul>
<li><p>If y = 1， we want h<sub>θ</sub>（x） ≈ 1， z&gt;&gt;0；</p></li>
<li><p>If y = 0， we want h<sub>θ</sub>（x） ≈ 0， z&lt;&lt;0；</p></li>
</ul>
<p>当 y = 1 或 y = 0 时， 上面逻辑回归的 cost function <strong>分别只剩下一项</strong>， 对应下面两张图中的灰色曲线： <img src="/images/AI/542362-20190103115121444-630233095.png" /></p>
<p>当 y=1 时，随着 z 增大， h<sub>θ</sub>（x） 逼近1，cost逐渐减小。　</p>
<p>当 y=0 时，随着 z 减小， h<sub>θ</sub>（x） 逼近0，cost逐渐减小。</p>
<p>现在我们用新的 cost function 来代替逻辑回归中的cost function，即上图中玫瑰色的曲线，它分为直线和斜线两部分。左边的函数称为cost<sub>1</sub>（z），右边函数称为 cost<sub>0</sub>（z）。</p>
<p>在之后的优化问题中，这种形式的 cost function 会为 SVM 带来计算上的优势。</p>
<p>现在开始构建SVM:</p>
<p><img src="/images/AI/542362-20190103124001893-591978736.png" /></p>
<p>逻辑回归的 cost function 分为A、B 两个部分。 我们做下面的操作：</p>
<ol type="1">
<li><p>使用之前定义的 cost<sub>1</sub>（）和cost<sub>0</sub>（）替换公式中对应的项</p></li>
<li><p>根据 SVM 的习惯，除去 1/m 这个系数</p>
<blockquote>
<p>因为1/m 仅是个常量，去掉它也会得出同样的 θ 最优值。</p>
</blockquote></li>
<li><p>同样根据 SVM 的习惯，做一点变动</p></li>
</ol>
<p>对于逻辑回归， cost function 为 A + λ × B ，通过设置不同的 λ 达到优化目的。 对于SVM， 我们删掉 λ，引入常数 C， 将 cost function 改为 C × A + B， 通过设置不同的 C 达到优化目的。 （在优化过程中，其意义和逻辑回归是一样的。可以理解为 C = 1 / λ）</p>
<p>最终得到 SVM 的代价函数：</p>
<p><img src="/images/AI/542362-20190103123943931-1311095144.png" /></p>
<p>另外，逻辑回归中假设的输出是一个概率值。 而 SVM 直接预测 y = 1，还是 y = 0。</p>
Hypothesis: $$ h_(x) =
<span class="math display">\[\begin{cases}
1&amp;if \  \theta^T ≥0 \\
0&amp;otherwise

\end{cases}\]</span>
<p>$$</p>
<p>当θ<sup>T</sup>x ≥ 0 时，SVM 会预测结果为1，其他情况下，预测结果为0。</p>
<h2 id="大间距分类的直观理解-large-margin-intuition"><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV164411b7dx?p=71">12.2 大间距分类的直观理解 Large Margin Intuition</a></h2>
<p>SVM 经常被看作是一个"大间距分类器"，也就是找到一条与正类、负类的距离最大的分隔线。 例如下图中的黑线.</p>
<p>在这一节，我们将得出结论： <strong>为了增加鲁棒性，得到更好的结果(避免欠拟合、过拟合，应对线性不可分的情况)，SVM 做的不仅仅是将间距最大化，而是做了一些优化：</strong></p>
<ol type="1">
<li><p>逻辑回归的定义中，z ≥ 0 被分为正类，z &lt; 0 被分为负类，而SVM 的要求更严格： z ≥ 1 被分为正类；z ≤ -1 被分为负类。</p>
<blockquote>
<p>这就相当于在支持向量机中嵌入了一个额外的安全因子，或者说安全的间距因子。</p>
</blockquote>
<p><img src="/images/AI/542362-20190103124411950-307653802.png" /></p></li>
<li><p>只有当<strong>C 特别大</strong>的时候， SVM 才是一个最大间隔分类器</p>
<p><img src="/images/AI/542362-20190103130137765-914540003.png" /> <span class="math display">\[
\min_\limits{\theta}C\sum_\limits{i=1}^{m}\left[y^{(i)}{\cos}t_{1}\left(\theta^{T}x^{(i)}\right)+\left(1-y^{(i)}\right){\cos}t\left(\theta^{T}x^{(i)}\right)\right]+\frac{1}{2}\sum_\limits{i=1}^{n}\theta^{2}_{j}
\]</span> 当 C 特别大时，在优化过程中，第一项会接近于0，目标变为最小化第二项： <span class="math display">\[
min \frac{1}{2}\sum^n_{j=1}\theta_j^2 s.t =
\begin{cases}
\theta^Tx^{(i)}≥1&amp; if\ y^{(i)} =1 \\
\theta^Tx^{(i)}≤-1&amp; if\ y^{(i)} =0
\end{cases}
\]</span> 我们在训练集中加入一个异常点 outlier ，如下：</p>
<p><img src="/images/AI/542362-20190103131843751-1794981225.png" /></p></li>
</ol>
<ul>
<li>如果想将样本用最大间距分开，即将 C 设置的很大。那么仅因为一个异常点，决策边界会从黑线变成那条粉线，这实在是不明智的。</li>
<li>如果 C 设置的小一点，最终得到这条黑线。它可以忽略一些异常点的影响，而且当数据线性不可分的时候，也可以将它们恰当分开，得到更好地决策边界。</li>
</ul>
<p>另外，因为 C = 1 / λ，因此:</p>
<ul>
<li>C 较小时，相当于 λ 较大。可能会导致欠拟合，高偏差 variance。</li>
<li>C 较大时，相当于 λ 较小。可能会导致过拟合，高方差 bias。</li>
</ul>
<blockquote>
<p>（注：这个性质在习题中考察多次）</p>
</blockquote>
<h2 id="大间距分类背后的数学-mathematics-behind-large-margin-classification"><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV164411b7dx?p=72">12.3 大间距分类背后的数学 Mathematics Behind Large Margin Classification</a></h2>
<h3 id="向量内积">向量内积</h3>
<p>先看一下向量内积的知识： 假设有两个二维向量 u 和 v ，u<sup>T</sup>v 叫做向量 u 和 v 之间的内积。</p>
<p><img src="https://github.com/fengdu78/Coursera-ML-AndrewNg-Notes/raw/master/images/55e05845c636c8c99c03e6e29337d8c4.png" /></p>
<p>∥u∥ 表示 u 的范数norm，即向量 u 的欧几里得长度，是一个实数。根据毕达哥拉斯定理： <span class="math display">\[
||u|| = \sqrt{u_1^2+u_2^2}
\]</span></p>
<ol type="1">
<li><p>第一种内积计算方式：首先将 v 投影至 u 向量，记其长度为p（有正负，与u同向为正，反向为负，标量），则两向量的内积</p>
<p>u<sup>T</sup>v = ||u|| · ||v|| · cosθ = ||u|| · p</p>
<blockquote>
<p>||u|| 是一个实数，p也是一个实数，因此u<sup>T</sup>v就是两个实数正常相乘。</p>
</blockquote></li>
<li><p>第二种内积计算公式： u<sup>T</sup>v = u1 × v1 + u2 × v2 = v<sup>T</sup>u</p></li>
</ol>
<h3 id="svm-代价函数的另一种理解">SVM 代价函数的另一种理解</h3>
<p>SVM的 cost function 如下： <span class="math display">\[
\min_\limits{\theta}C\sum_\limits{i=1}^{m}\left[y^{(i)}{\cos}t_{1}\left(\theta^{T}x^{(i)}\right)+\left(1-y^{(i)}\right){\cos}t\left(\theta^{T}x^{(i)}\right)\right]+\frac{1}{2}\sum_\limits{i=1}^{n}\theta^{2}_{j}
\]</span> 如果将C设的很大，cost function只剩下后面的那项。 为简化设 θ<sub>0</sub> = 0，只剩下 θ<sub>1</sub>和θ<sub>2</sub>，则 cost function 为：</p>
<p>J(θ) = 1/2 × ||θ||<sup>2</sup></p>
<p><img src="https://github.com/fengdu78/Coursera-ML-AndrewNg-Notes/raw/master/images/3cc61c6e5fe85c2a7bf8170f5bbfd8c3.png" /></p>
<p>而根据上面内积的公式，我们知道有 θ<sup>T</sup>x = p · ||θ||，其中 p 是 x 在 θ 上的投影。 使用p<sup><code>(i)</code></sup> ⋅ ∥θ∥ 代替之前约束中的 θ<sup>T</sup>x<sup><code>(i)</code></sup> ，得到： <img src="/images/AI/542362-20190103134623201-815611366.png" /></p>
<h3 id="svm-如何选择更优的决策边界">SVM 如何选择更优的决策边界</h3>
<p>考察优化目标函数时， 假设我们的到一条绿色的决策边界。样本在决策边界上的投影 p 是粉色的线：</p>
<p><img src="/images/AI/542362-20190103141909589-1115760339.png" /></p>
<ul>
<li>对于正样本 x（1）而言，想要p（1） ⋅ ∥θ∥ &gt;= 1，现在 p（1） 长度非常短，就意味着 ||θ|| 需要非常大；</li>
<li>对于负样本 x（2） 而言，想要p（2） ⋅∥θ∥ &lt;= −1，现在p（2） 长度非常短，就意味着 ||θ|| 需要非常大。</li>
</ul>
<p>但我们的目标函数是希望最小化参数 θ 的范数，因此我们希望： <strong>投影长度 p（i） 尽可能大</strong>。例如下面这条绿色的决策边界，就更好一些：</p>
<p><img src="/images/AI/542362-20190103142216986-408755806.png" /></p>
<blockquote>
<p>θ<sub>0</sub> = 0的意思是我们让决策界通过原点。如果θ<sub>0</sub> ≠ 0，决策边界不过原点 ，SVM 产生大间距分类器的结论同样成立（在 C 特别大的情况下）。</p>
<p>即便θ<sub>0</sub>不等于0，支持向量机要做的事情都是优化这个目标函数对应着C值非常大的情况，但是可以说明的是，即便θ<sub>0</sub>不等于0，支持向量机仍然会找到正样本和负样本之间的大间距分隔。</p>
</blockquote>
<h2 id="核函数-kernels-i"><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV164411b7dx?p=73">12.4 核函数 Kernels I</a></h2>
<p>使用高级数的多项式模型，可以解决无法用直线进行分隔的分类：</p>
<p><img src="/images/AI/542362-20190103145209635-975038277.png" /></p>
<p>可以用一系列的新的特征 f 来替换模型中的每一项。例如令: f<sub>1</sub> = x<sub>1</sub> ， f<sub>2</sub> = x<sub>2</sub> ， f<sub>3</sub> = x<sub>1</sub> x<sub>2</sub> ， f<sub>4</sub> = x<sub>1</sub><sup>2</sup> ， f<sub>5</sub>= x<sub>2</sub><sup>2</sup>... 得到h<sub>θ</sub>(x) = f<sub>1</sub> + f<sub>2</sub> +. . . +f<sub>n</sub> 。</p>
<p>有没有更好的方法来构造 f<sub>1</sub> ， f<sub>2</sub> ， f<sub>3</sub> ?</p>
<p>我们可以利用<strong>核函数</strong>来计算出新的特征。</p>
<p>给定一个训练实例 x ，我们利用 x 的各个特征与我们预先选定的 landmarks l<sup><code>(1)</code> </sup>， l<sup><code>(2)</code> </sup>， l<sup><code>(3)</code> </sup>的近似程度来选取新的特征 f<sub>1</sub> ， f<sub>2</sub> ， f<sub>3</sub> 。</p>
<p><img src="/images/AI/542362-20190103145753849-51226090.png" /> 其中: ||x − l （1） || 为实例 x 中所有特征与 <code>landmark l(1)</code> 距离的和。</p>
<p>上例中的 similarity<code>(x， l (1) )</code>就是核函数，具体来说是一个高斯核函数(Gaussian Kernel)。</p>
<blockquote>
<p>注：这个函数与正态分布没什么实际上的关系，只是看上去像而已。</p>
</blockquote>
<p>如果一个训练实例 x 与 l 很近，则 f 近似于e<sup>−0</sup> = 1；如果一个训练实例 x 与 l 很远，则 f 近似于e<sup>−( 较大的数 )</sup> = 0。 如下：</p>
<p><img src="/images/AI/542362-20190103150320704-592951158.png" /></p>
<p>假设 x 含有两个特征[x1 x2 ]， 不同的 σ 值会有不同效果。 图中水平面的坐标为 x1， x 2 而垂直坐标轴代表 f。只有当 x 与 l（1） 重合时， f 才具有最大值。随着 x 的改变 f 值的变化速率受到 σ2 的控制。 σ2越小，曲线越瘦</p>
<p><img src="/images/AI/542362-20190103150454141-1148284570.png" /></p>
<p>下图中，粉色点离 l （1） 更近，所以 f1 接近 1，而 f2 ，f3 接近 0。因此h<sub>θ</sub>（x） ≥ 0，因此预测y = 1；同理，绿色点离 l（2）较近的，也预测y = 1；但蓝绿色点离三个 landmark 都较远，预测y = 0。</p>
<p><img src="/images/AI/542362-20190103150729571-1298221647.png" /> 图中红色封闭曲线便是决策边界。在预测时我们采用的特征不是训练实例本身的特征，而是通过核函数计算出的新特征f1 ， f2 ， f3 。</p>
<h2 id="核函数-kernels-ii"><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV164411b7dx?p=74">12.5 核函数 Kernels II</a></h2>
<h3 id="如何选择-landemark">（1） 如何选择 landemark</h3>
<p>通常如果训练集有m个实例，则选取m个landmark，并将 l<sup>（i）</sup>初始化为x<sup>（i）</sup> ：</p>
<p><img src="/images/AI/542362-20190103152844236-1177317061.png" /></p>
<p><strong>好处</strong>：新特征建立在原有特征与训练集中所有其他特征之间距离的基础之上。</p>
<p><img src="/images/AI/542362-20190103153153980-1389069926.png" /></p>
<p>对实例 （x<sup>（i）</sup>，y<sup>（i）</sup>），有：</p>
<p><img src="/images/AI/eca2571849cc36748c26c68708a7a5bd.png" /></p>
<p>其中 Gievn x: <span class="math display">\[
f_i = similarity (x, l^{(i)}) = exp(-\frac{||x-l^{(i)}||^2}{2 \sigma^2})
\]</span></p>
<h3 id="将-kernel-引入-svm">（2）将 kernel 引入 SVM</h3>
<p>我们将Gaussian Kernel 代入 SVM 的 cost function，如下图所示： <img src="/images/AI/542362-20190103153400042-648980565.png" /></p>
<p>这里与之前的 cost function的区别在于用核函数 f 代替了x。</p>
<p>预测一个实例 x 对应结果的方法： 给定x，计算新特征 f，当 θ<sup>T</sup>f ≥ 0 时预测 y = 1； 否则反之。</p>
<h3 id="简化计算">（3）简化计算</h3>
<p>最后，为了简化计算， 在计算正则项 θ<sup>T</sup>θ 时，用 θ<sup>T</sup>Mθ 代替 θ<sup>T</sup>θ ，其中 M 是一个矩阵，核函数不同则M不同。</p>
<blockquote>
<p>注：理论上也可以在逻辑回归中使用核函数，但使用 M 简化计算的方法不适用于逻辑回归，计算将非常耗时。</p>
</blockquote>
<h3 id="线性核函数">（4）线性核函数</h3>
<p>不使用核函数又称为线性核函数(linear kernel)。线性核函数SVM 适用于函数简单，或特征非常多而实例非常少的情况。</p>
<h3 id="svm-的参数">（5）SVM 的参数</h3>
<p>带有 kernel 的 SVM 有两个参数 C 和 σ，对结果的影响如下：</p>
<ol type="1">
<li>. C
<ul>
<li>当 C 较大，相当于 λ 小，可能会导致过拟合，高方差 variance;</li>
<li>当 C 较小，相当于 λ 大，可能会导致欠拟合，高偏差 bias;</li>
</ul></li>
<li>σ
<ul>
<li>当 σ 较大时，图像扁平，可能会导致低方差，高偏差 bias;</li>
<li>当 σ 较小时，图像窄尖，可能会导致低偏差，高方差 variance。</li>
</ul></li>
</ol>
<p><img src="/images/AI/542362-20190103155935042-1176854470.png" /></p>
<h2 id="使用支持向量机-using-an-svm"><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV164411b7dx?p=75">12.6 使用支持向量机 Using An SVM</a></h2>
<p><img src="/images/AI/542362-20190103160216403-1377452821.png" /></p>
<h3 id="使用现有软件包">（1）使用现有软件包</h3>
<p>我们通常需要自己写核函数，然后使用现有的软件包（如 liblinear，libsvm 等） 来最小化 SVM 代价函数。强烈建议使用高优化软件库中的一个，而不是尝试自己实现。</p>
<h3 id="对比一下两种-svm">（2）对比一下两种 SVM</h3>
<ul>
<li>一种是No kernel（linear kernel），h<sub>θ</sub>（x）=g（θ<sub>0</sub>x<sub>0</sub>+θ<sub>1</sub>x<sub>1</sub>+…+θ<sub>n</sub>x<sub>n</sub>），predict y=1 if θ<sup>T</sup>x≥ 0;</li>
<li>另一种是使用kernel f（比如Gaussian Kernel），h<sub>θ</sub>（x）=g（θ<sub>0</sub>f<sub>0</sub>+θ<sub>1</sub>f<sub>1</sub>+…+θ<sub>n</sub>f<sub>n</sub>），这里需要选择方差参数σ<sup>2</sup></li>
</ul>
<h3 id="特征缩放">（3）特征缩放</h3>
<p>特别地，如果使用高斯核函数，需要进行特征缩放。</p>
<p><img src="/images/AI/542362-20190103160825112-994760644.png" /></p>
<h3 id="其他-kernel">（4）其他 kernel</h3>
<p>在高斯核函数之外，还有其他一些选择，如：</p>
<ul>
<li>多项式核函数（Polynomial Kernel）</li>
<li>字符串核函数（String kernel）</li>
<li>卡方核函数（chi-square kernel）</li>
<li>直方图交集核函数（histogram intersection kernel）</li>
<li>...</li>
</ul>
<p>它们的目标也都是根据训练集和地标之间的距离来构建新特征。一个核函数需要满足 Mercer's 定理，才能被 SVM 的优化软件正确处理。</p>
<blockquote>
<p>但是Andrew表示他不用其他kernel函数。</p>
</blockquote>
<h3 id="多分类问题">（5）多分类问题</h3>
<p>可以训练k个支持向量机来解决多类分类问题。 但是大多数支持向量机软件包都有内置的多类分类功能，我们只要直接使用即可。</p>
<p><img src="/images/AI/542362-20190103161207449-1374398301.png" /></p>
<h3 id="参数设置">（6） 参数设置</h3>
<p>尽管有现成的库，但是我们也需要做几件事:</p>
<ol type="1">
<li><p>参数C的选择。</p></li>
<li><p>选择内核参数或你想要使用的相似函数</p>
<blockquote>
<p>注：如果选择不需要任何内核参数，还称为使用了线性核函数 SVM。</p>
</blockquote></li>
</ol>
<h3 id="逻辑回归模型-和-svm-的选择">（7）逻辑回归模型 和 SVM 的选择</h3>
<p>下面是一些普遍使用的准则：</p>
<p>n为特征数，m为训练样本数。</p>
<ul>
<li>如果 n &gt;&gt; m，即训练集数据量不够支持我们训练一个复杂的非线性模型，选用逻辑回归模型或者不带核函数的 SVM。</li>
<li>如果 n较小，m中等，例如n在 1-1000 之间，而m在 10-10000 之间，使用高斯核函数的 SVM。</li>
<li>如果 n较小，m较大，例如n在 1-1000 之间，而m大于 50000，则使用 SVM 会非常慢。解决方案是创造、增加更多的特征，然后使用逻辑回归或不带核函数的 SVM。</li>
</ul>
<p><strong>如果训练集非常大，高斯核函数的SVM 会非常慢。</strong></p>
<blockquote>
<p>通常Andrew会尝试手动创建特征，然后用逻辑回归或者不带核函数的 SVM。</p>
</blockquote>
<blockquote>
<p>注： 逻辑回归和不带核函数的SVM 非常相似。但是根据实际情况，其中一个可能会更有效。随着 SVM 的复杂度增加、特征数量相当大时，不带核函数的SVM 就会表现得相当突出。</p>
</blockquote>
<p><img src="/images/AI/542362-20190103163342898-412553107.png" /></p>
<p>一个设计得很好的神经网络也很有可能会非常有效。有一个缺点是，可能会特别慢。一个非常好的 SVM 实现包可能会运行得比较快比神经网络快很多，而且它的代价函数是凸函数，不存在局部最优解。</p>
<blockquote>
<p>注:当时 GPU 计算比较慢，神经网络还不流行。</p>
</blockquote>
<h2 id="exercise"><a target="_blank" rel="noopener" href="https://www.cnblogs.com/maxiaodoubao/p/10153163.html">Exercise</a></h2>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Chaoqun Yin</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://yintelligence.tech/2021/04/11/2021-04-11-Support-Vector-Machines-%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/">https://yintelligence.tech/2021/04/11/2021-04-11-Support-Vector-Machines-%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        Reprint policy:
                    </i>
                </span>
                <span class="reprint-info">
                    All articles in this blog are used except for special statements
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    reprint polocy. If reproduced, please indicate source
                    <a href="/about" target="_blank">Chaoqun Yin</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Machine-Learning/">
                                    <span class="chip bg-color">Machine Learning</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2021/04/12/2021-04-12-Unsupervised-Learning---Clustering-%E8%81%9A%E7%B1%BB/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/9.jpg" class="responsive-img" alt="Unsupervised Learning - Clustering 聚类">
                        
                        <span class="card-title">Unsupervised Learning - Clustering 聚类</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            While supervised learning algorithms need labelled examples (x,y), unsupervised learning algorithms need only the input (x). You will learn about clustering—which is used for market segmentation, text summarization, among many other applications.
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-04-12
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Artificial-Intelligence/" class="post-category">
                                    Artificial Intelligence
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Machine-Learning/">
                        <span class="chip bg-color">Machine Learning</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/04/10/2021-04-09-Trees-Indexes-I/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/18.jpg" class="responsive-img" alt="Trees Indexes I">
                        
                        <span class="card-title">Trees Indexes I</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Chapter 11.1-11.4
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-04-10
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Database/" class="post-category">
                                    Database
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Database-systems/">
                        <span class="chip bg-color">Database systems</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + 'From: Chaoqun Yin<br />'
            + 'Author: Chaoqun Yin<br />'
            + 'Link: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\(', '\)']]}
    });
</script>



    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021</span>
            
            <span id="year">2021</span>
            <a href="/about" target="_blank">Chaoqun Yin</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2021";
                    var startMonth = "1";
                    var startDate = "28";
                    var startHour = "2";
                    var startMinute = "1";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/yintelligence" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:Yintelligence@outlook.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
